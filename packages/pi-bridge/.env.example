# BirdCam Network Pi Bridge Configuration
# Copy this to .env and fill in your values

# === Camera Settings ===
# RTSP URL of your IP camera (required unless using ONVIF)
CAMERA_RTSP_URL=rtsp://admin:password@192.168.1.100:554/stream1

# Camera name (shown in dashboard)
CAMERA_NAME=Backyard Feeder Cam

# Optional: Camera location description
CAMERA_LOCATION=Backyard

# === ONVIF Settings ===
# Enable ONVIF for auto-discovery and connection (instead of manual RTSP URL)
USE_ONVIF=false

# Auto-discover ONVIF cameras on the local network
# If false, you must specify ONVIF_HOST
ONVIF_AUTO_DISCOVER=false

# ONVIF camera IP/hostname (required if USE_ONVIF=true and AUTO_DISCOVER=false)
ONVIF_HOST=192.168.1.100

# ONVIF port (usually 80)
ONVIF_PORT=80

# ONVIF credentials (required for most cameras)
ONVIF_USERNAME=admin
ONVIF_PASSWORD=password

# Specific profile token (empty = auto-select highest resolution)
ONVIF_PROFILE_TOKEN=

# === Firebase Settings ===
# Path to your Firebase service account JSON (required)
FIREBASE_SERVICE_ACCOUNT_PATH=/home/pi/birdcam/firebase-service-account.json

# Firebase project ID
FIREBASE_PROJECT_ID=birdwatchnetwork

# === Stream Settings ===
# Local port for HLS server
HLS_PORT=8080

# HLS segment duration (seconds)
HLS_SEGMENT_DURATION=2

# Number of HLS segments to keep
HLS_PLAYLIST_SIZE=5

# Output resolution (empty = same as source)
OUTPUT_RESOLUTION=

# Output bitrate (e.g., 2000k)
OUTPUT_BITRATE=2000k

# === Tunnel Settings ===
# Use Cloudflare Tunnel for external access
USE_CLOUDFLARE_TUNNEL=true

# Cloudflare tunnel token (get from Zero Trust dashboard)
CLOUDFLARE_TUNNEL_TOKEN=

# Or use a custom hostname if you have your own domain
# CLOUDFLARE_TUNNEL_HOSTNAME=camera.yourdomain.com

# === Bird Detection ===
# Enable BirdNET-based bird detection (requires birdnetlib)
BIRD_DETECTION_ENABLED=true

# Minimum confidence threshold (0-1)
DETECTION_MIN_CONFIDENCE=0.7

# Seconds between analysis cycles
DETECTION_INTERVAL=3

# Seconds of audio to capture per sample
DETECTION_SAMPLE_DURATION=3

# Location for species filtering (optional but recommended)
LOCATION_LATITUDE=
LOCATION_LONGITUDE=

# BirdNET locale for common names (en, de, fr, etc.)
BIRDNET_LOCALE=en

# === Clip Recording ===
# Enable clip recording on bird detection
CLIP_RECORDING_ENABLED=true

# Clip duration in seconds
CLIP_DURATION=15

# Seconds before detection to include in clip
CLIP_PRE_BUFFER=5

# Clips storage directory
CLIPS_OUTPUT_DIR=./clips

# Maximum clips to keep (oldest deleted first)
MAX_CLIPS=100

# Maximum storage in MB for clips
MAX_STORAGE_MB=1024

# Generate thumbnail from each clip
GENERATE_THUMBNAILS=true

# === Advanced ===
# Enable debug logging
DEBUG=false

# FFmpeg path (usually auto-detected)
FFMPEG_PATH=

# Device ID (auto-generated if empty)
DEVICE_ID=
