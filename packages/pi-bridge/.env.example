# BirdCam Network Pi Bridge Configuration
# Copy this to .env and fill in your values

# === Camera Settings ===
# RTSP URL of your IP camera (optional if using ONVIF)
# CAMERA_RTSP_URL=rtsp://admin:password@192.168.86.30:554/stream1

# Camera name (shown in dashboard)
CAMERA_NAME=BirdCam

# Optional: Camera location description
CAMERA_LOCATION=Backyard

# === ONVIF Settings ===
# Enable ONVIF for auto-discovery, PTZ control, and time sync (RECOMMENDED)
USE_ONVIF=true

# Auto-discover ONVIF cameras on the local network
# If false, you must specify ONVIF_HOST
ONVIF_AUTO_DISCOVER=false

# ONVIF camera IP/hostname (required if USE_ONVIF=true and AUTO_DISCOVER=false)
# Example: Amcrest IP5M at 192.168.86.30
ONVIF_HOST=192.168.86.30

# ONVIF port (usually 80, some cameras use 8080)
ONVIF_PORT=80

# ONVIF credentials (required for most cameras)
ONVIF_USERNAME=admin
ONVIF_PASSWORD=admin

# Specific profile token (empty = auto-select highest resolution)
ONVIF_PROFILE_TOKEN=

# === Firebase Settings ===
# Path to your Firebase service account JSON (required)
FIREBASE_SERVICE_ACCOUNT_PATH=/home/pi/birdcam/firebase-service-account.json

# Firebase project ID
FIREBASE_PROJECT_ID=birdwatchnetwork

# === Stream Settings ===
# Stream mode: webrtc | hls | auto
# - webrtc: Use WebRTC (go2rtc) for low-latency streaming
# - hls: Use HLS for buffered streaming (higher compatibility)
# - auto: Use WebRTC with HLS fallback (recommended)
STREAM_MODE=webrtc

# Local port for HLS server
HLS_PORT=8080

# HLS segment duration (seconds)
HLS_SEGMENT_DURATION=2

# Number of HLS segments to keep
HLS_PLAYLIST_SIZE=5

# Output resolution (empty = same as source)
OUTPUT_RESOLUTION=

# Output bitrate (e.g., 2000k)
OUTPUT_BITRATE=2000k

# === Tunnel Settings ===
# Use Cloudflare Tunnel for external access
USE_CLOUDFLARE_TUNNEL=true

# Cloudflare tunnel token (get from Zero Trust dashboard)
CLOUDFLARE_TUNNEL_TOKEN=

# Or use a custom hostname if you have your own domain
# CLOUDFLARE_TUNNEL_HOSTNAME=camera.yourdomain.com

# === Bird Detection ===
# Enable BirdNET-based bird detection (requires birdnetlib)
BIRD_DETECTION_ENABLED=true

# Minimum confidence threshold (0-1)
DETECTION_MIN_CONFIDENCE=0.7

# Seconds between analysis cycles
DETECTION_INTERVAL=3

# Seconds of audio to capture per sample
DETECTION_SAMPLE_DURATION=3

# Location for species filtering (optional but recommended)
LOCATION_LATITUDE=
LOCATION_LONGITUDE=

# BirdNET locale for common names (en, de, fr, etc.)
BIRDNET_LOCALE=en

# === Clip Recording ===
# Enable clip recording on bird detection
CLIP_RECORDING_ENABLED=true

# Clip duration in seconds
CLIP_DURATION=15

# Seconds before detection to include in clip
CLIP_PRE_BUFFER=5

# Clips storage directory
CLIPS_OUTPUT_DIR=./clips

# Maximum clips to keep (oldest deleted first)
MAX_CLIPS=100

# Maximum storage in MB for clips
MAX_STORAGE_MB=1024

# Generate thumbnail from each clip
GENERATE_THUMBNAILS=true

# === Motion Detection ===
# Enable motion-triggered recording
MOTION_DETECTION_ENABLED=true

# Motion sensitivity (0-100, higher = more sensitive)
MOTION_SENSITIVITY=50

# Cooldown between motion events (ms)
MOTION_COOLDOWN_MS=5000

# === Recording ===
# Directory for video clips
CLIPS_DIR=/var/birdcam/clips

# Directory for snapshots  
SNAPSHOTS_DIR=/var/birdcam/snapshots

# How long to keep recordings (days)
RETENTION_DAYS=7

# Maximum storage to use (MB)
MAX_STORAGE_MB=10000

# === Security ===
# Enable authentication (HIGHLY RECOMMENDED)
AUTH_ENABLED=true

# Dashboard login credentials
AUTH_USERNAME=admin
AUTH_PASSWORD=your_secure_password_here

# API key for programmatic access (auto-generated if not set)
# API_KEY=birdcam_your_api_key_here

# === Advanced ===
# Enable debug logging
DEBUG=false

# FFmpeg path (usually auto-detected)
FFMPEG_PATH=

# Device ID (auto-generated if empty)
DEVICE_ID=
